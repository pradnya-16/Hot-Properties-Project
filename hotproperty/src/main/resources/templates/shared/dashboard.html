<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body>
  <div th:replace="~{fragments/icon_only_header :: header}"></div>
<div class="dashboard-container">
  <h1 th:text="${'Welcome, ' + user.firstName + ' ' + user.lastName + '!'}"></h1>
  <p th:text="${'Your role: ' + user.role.name()}"></p>

  <h2 th:if="${user.role.name() =='BUYER'}">Buyer Dashboard</h2>
  <h2 th:if="${user.role.name() =='AGENT'}">Agent Dashboard</h2>
  <h2 th:if="${user.role.name() =='ADMIN'}">Admin Dashboard</h2>
  <hr>
  <div>
    <a th:href="@{/profile}" class="dashboard-link">My Profile</a>

    <div th:if="${user.role.name() == 'BUYER'}">
      <a th:href="@{/browse_properties}" class="dashboard-link">Browse Properties</a><br>
      <a th:href="@{/favorites}" class="dashboard-link">Saved Favorites</a><br>
      <a th:href="@{/buyer/view_messages}"class="dashboard-link">View Messages</a><br>
    </div>
    <div th:if="${user.role.name() == 'AGENT'}">
      <a th:href="@{/manage_properties}" class="dashboard-link">Manage Listing</a><br>
      <a th:href="@{/agent/add_properties}" class="dashboard-link">Add New Property</a><br>
      <a th:href="@{/agent/view_messages}" class="dashboard-link">View Messages</a><br>
    </div>
    <div th:if="${user.role.name() == 'ADMIN'}">
      <a th:href="@{/user_management}" class="dashboard-link">Manage Users</a><br>
      <a th:href="@{/agent_form}" class="dashboard-link">Create Agent</a><br>
    </div>
  </div>
  <div class="logout-container">
    <form th:action="@{/logout}" method="post">
      <button type="submit" class="btn btn-logout">Logout</button>
    </form>
  </div>
</div>
</body>
</html>